(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-66168e47"],{"013f":function(e,t,i){var a=i("4ce5"),r=i("224c"),n=i("008a"),s=i("eafa"),o=i("5dd2");e.exports=function(e,t){var i=1==e,l=2==e,c=3==e,u=4==e,p=6==e,h=5==e||p,d=t||o;return function(t,o,f){for(var m,v,g=n(t),b=r(g),y=a(o,f,3),w=s(b.length),x=0,T=i?d(t,w):l?d(t,0):void 0;w>x;x++)if((h||x in b)&&(m=b[x],v=y(m,x,g),e))if(i)T[x]=v;else if(v)switch(e){case 3:return!0;case 5:return m;case 6:return x;case 2:T.push(m)}else if(u)return!1;return p?-1:c||u?u:T}}},"0aed":function(e,t,i){"use strict";i("aaba");var a=i("bf16"),r=i("86d4"),n=i("238a"),s=i("f6b4"),o=i("cb3d"),l=i("8714"),c=o("species"),u=!n((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),p=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var i="ab".split(e);return 2===i.length&&"a"===i[0]&&"b"===i[1]}();e.exports=function(e,t,i){var h=o(e),d=!n((function(){var t={};return t[h]=function(){return 7},7!=""[e](t)})),f=d?!n((function(){var t=!1,i=/a/;return i.exec=function(){return t=!0,null},"split"===e&&(i.constructor={},i.constructor[c]=function(){return i}),i[h](""),!t})):void 0;if(!d||!f||"replace"===e&&!u||"split"===e&&!p){var m=/./[h],v=i(s,h,""[e],(function(e,t,i,a,r){return t.exec===l?d&&!r?{done:!0,value:m.call(t,i,a)}:{done:!0,value:e.call(i,t,a)}:{done:!1}})),g=v[0],b=v[1];a(String.prototype,e,g),r(RegExp.prototype,h,2==t?function(e,t){return b.call(e,this,t)}:function(e){return b.call(e,this)})}}},2346:function(e,t,i){var a=i("75c4");e.exports=Array.isArray||function(e){return"Array"==a(e)}},"26a9":function(e,t,i){"use strict";var a=i("e46a"),r=i.n(a);r.a},"2fd4":function(e,t,i){var a=i("fb68"),r=i("75c4"),n=i("cb3d")("match");e.exports=function(e){var t;return a(e)&&(void 0!==(t=e[n])?!!t:"RegExp"==r(e))}},"5dd2":function(e,t,i){var a=i("81dc");e.exports=function(e,t){return new(a(e))(t)}},"6d57":function(e,t,i){for(var a=i("e44b"),r=i("80a9"),n=i("bf16"),s=i("e7ad"),o=i("86d4"),l=i("da6d"),c=i("cb3d"),u=c("iterator"),p=c("toStringTag"),h=l.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=r(d),m=0;m<f.length;m++){var v,g=f[m],b=d[g],y=s[g],w=y&&y.prototype;if(w&&(w[u]||o(w,u,h),w[p]||o(w,p,g),l[g]=h,b))for(v in a)w[v]||n(w,v,a[v],!0)}},7108:function(e,t,i){"use strict";var a=i("7e23"),r=RegExp.prototype.exec;e.exports=function(e,t){var i=e.exec;if("function"===typeof i){var n=i.call(e,t);if("object"!==typeof n)throw new TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==a(e))throw new TypeError("RegExp#exec called on incompatible receiver");return r.call(e,t)}},"7ee5":function(e,t){var i=function(e){if(this.params=e,this.setImageType(),this.params.justConversion)this.responseData();else{this.quality=1,this.minMultiple=1,this.depPreprocessingFile=null;var t=this;switch(this.params.quality||(this.params.quality=.3),this.params.requestType){case"base64":if(this.calculatedSize(this.params.res)<=1024*this.params.size)return this.responseData(this.params.res);this.depPreprocessingFile=this.params.res,this.checkAndHandleUpload();break;case"file":case"blob":if(this.params.res.size<1024*this.params.size)return this.responseData(this.params.res);this.fileToBase64(this.params.res,(function(e){t.depPreprocessingFile=e,t.checkAndHandleUpload()}));break}}};i.prototype.setImageType=function(){if(this.params.imgType)switch(this.params.requestType){case"base64":var e=this.params.res.split(","),t=e[0].match(/:(.*?);/)[1];this.params.res=this.params.res.replace(t,this.params.imgType);break;case"file":this.params.fileName||(this.params.fileName=this.params.res.name.slice(0,/\.{1}[a-z]{1,}$/.exec(this.params.res.name).index));case"blob":this.params.res.type=this.params.imgType;break}},i.prototype.responseData=function(e){var t=this,i=this.params.requestType,a=this.params.responseType;if(this.minMultiple>1&&(i="base64"),i!==a){var r=i+"To"+a.charAt(0).toUpperCase()+a.slice(1),n={base64ToFile:this.base64ToFile.bind(this),base64ToBlob:this.base64ToBlob.bind(this),fileToBase64:this.fileToBase64.bind(this),fileToBlob:this.fileToBlob.bind(this),blobToBase64:this.blobToBase64.bind(this),blobToFile:this.blobToFile.bind(this)};n[r](e||this.params.res,(function(e){t.params.callback(e)}))}else this.params.callback(e||this.params.res)},i.prototype.calculatedSize=function(e){var t="base64",i=e.substring(e.indexOf(t)+t.length),a=i.indexOf("=");i=-1!==a?i.substring(0,a):i;var r=i.length;return r-r/8*2},i.prototype.checkAndHandleUpload=function(){var e=this;try{var t=new Image;t.src=this.depPreprocessingFile,t.onload=function(){var i=document.createElement("canvas"),a=i.getContext("2d"),r=e.params.width||this.width;i.width=r,i.height=e.params.height||this.height*(r/this.width),a.clearRect(0,0,i.width,i.height),a.drawImage(t,0,0,i.width,i.height);var n=i.toDataURL("image/jpeg",e.quality),s=e.calculatedSize(n);if(e.minMultiple+=1,s<1024*e.params.size)e.responseData(n);else{if(!(e.quality>e.params.quality))return void e.responseData(n);if(1===e.quality&&(e.depPreprocessingFile=n),e.quality-=e.params.quality,e.minMultiple>25)return void e.responseData(n);e.checkAndHandleUpload()}}}catch(i){this.params.callback(null)}},i.prototype.base64ToFile=function(e,t){var i=e.split(","),a=i[0].match(/:(.*?);/)[1],r=a.split("/")[1],n=atob(i[1]),s=n.length,o=new Uint8Array(s);while(s--)o[s]=n.charCodeAt(s);t(new File([o],(this.params.fileName||"file")+"."+r,{type:a}))},i.prototype.base64ToBlob=function(e,t){var i=e.split(","),a="",r="";i.length>1&&(r=i[1],a=i[0].substring(i[0].indexOf(":")+1,i[0].indexOf(";")));for(var n=atob(r),s=new ArrayBuffer(n.length),o=new Uint8Array(s),l=0;l<n.length;l++)o[l]=n.charCodeAt(l);t(new Blob([s],{type:a}))},i.prototype.fileToBase64=function(e,t){var i=new FileReader;i.readAsDataURL(e),i.onload=function(e){t(this.result)}},i.prototype.fileToBlob=function(e,t){var i=this;this.fileToBase64(e,(function(e){i.base64ToBlob(e,(function(e){t(e)}))}))},i.prototype.blobToBase64=function(e,t){this.fileToBase64(e,t)},i.prototype.blobToFile=function(e,t){this.fileToBlob(e,(function(e){t(e)}))},e.exports=i},"81dc":function(e,t,i){var a=i("fb68"),r=i("2346"),n=i("cb3d")("species");e.exports=function(e){var t;return r(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!r(t.prototype)||(t=void 0),a(t)&&(t=t[n],null===t&&(t=void 0))),void 0===t?Array:t}},8714:function(e,t,i){"use strict";var a=i("f1fe"),r=RegExp.prototype.exec,n=String.prototype.replace,s=r,o="lastIndex",l=function(){var e=/a/,t=/b*/g;return r.call(e,"a"),r.call(t,"a"),0!==e[o]||0!==t[o]}(),c=void 0!==/()??/.exec("")[1],u=l||c;u&&(s=function(e){var t,i,s,u,p=this;return c&&(i=new RegExp("^"+p.source+"$(?!\\s)",a.call(p))),l&&(t=p[o]),s=r.call(p,e),l&&s&&(p[o]=p.global?s.index+s[0].length:t),c&&s&&s.length>1&&n.call(s[0],i,(function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(s[u]=void 0)})),s}),e.exports=s},"9a33":function(e,t,i){"use strict";var a=i("2fd4"),r=i("69b3"),n=i("f63e"),s=i("e754"),o=i("eafa"),l=i("7108"),c=i("8714"),u=i("238a"),p=Math.min,h=[].push,d="split",f="length",m="lastIndex",v=4294967295,g=!u((function(){RegExp(v,"y")}));i("0aed")("split",2,(function(e,t,i,u){var b;return b="c"=="abbc"[d](/(b)*/)[1]||4!="test"[d](/(?:)/,-1)[f]||2!="ab"[d](/(?:ab)*/)[f]||4!="."[d](/(.?)(.?)/)[f]||"."[d](/()()/)[f]>1||""[d](/.?/)[f]?function(e,t){var r=String(this);if(void 0===e&&0===t)return[];if(!a(e))return i.call(r,e,t);var n,s,o,l=[],u=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),p=0,d=void 0===t?v:t>>>0,g=new RegExp(e.source,u+"g");while(n=c.call(g,r)){if(s=g[m],s>p&&(l.push(r.slice(p,n.index)),n[f]>1&&n.index<r[f]&&h.apply(l,n.slice(1)),o=n[0][f],p=s,l[f]>=d))break;g[m]===n.index&&g[m]++}return p===r[f]?!o&&g.test("")||l.push(""):l.push(r.slice(p)),l[f]>d?l.slice(0,d):l}:"0"[d](void 0,0)[f]?function(e,t){return void 0===e&&0===t?[]:i.call(this,e,t)}:i,[function(i,a){var r=e(this),n=void 0==i?void 0:i[t];return void 0!==n?n.call(i,r,a):b.call(String(r),i,a)},function(e,t){var a=u(b,e,this,t,b!==i);if(a.done)return a.value;var c=r(e),h=String(this),d=n(c,RegExp),f=c.unicode,m=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(g?"y":"g"),y=new d(g?c:"^(?:"+c.source+")",m),w=void 0===t?v:t>>>0;if(0===w)return[];if(0===h.length)return null===l(y,h)?[h]:[];var x=0,T=0,S=[];while(T<h.length){y.lastIndex=g?T:0;var k,_=l(y,g?h:h.slice(T));if(null===_||(k=p(o(y.lastIndex+(g?0:T)),h.length))===x)T=s(h,T,f);else{if(S.push(h.slice(x,T)),S.length===w)return S;for(var L=1;L<=_.length-1;L++)if(S.push(_[L]),S.length===w)return S;T=x=k}}return S.push(h.slice(x)),S}]}))},a2cd:function(e,t,i){"use strict";var a=i("238a");e.exports=function(e,t){return!!e&&a((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},aaba:function(e,t,i){"use strict";var a=i("8714");i("e46b")({target:"RegExp",proto:!0,forced:a!==/./.exec},{exec:a})},aace:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("v-back",{attrs:{title:"set"==e.$route.query.type?"黄名单信息修改":"添加黄名单"}}),i("div",{staticClass:"scroll-view"},[i("md-field",[i("div",{staticClass:"md-field-item is-solid"},[i("div",{staticClass:"md-field-item-content",staticStyle:{padding:"0"}},[i("label",{staticClass:"md-field-item-title"},[e._v("* 图片")]),i("div",{staticClass:"md-field-item-control"},[i("ul",{staticClass:"image-reader-list"},[e._l(e.imageList["tupian"],(function(t,a){return i("li",{key:a,staticClass:"image-reader-item",style:{backgroundImage:"url("+t+")",backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundSize:"cover"},on:{click:function(i){return e.imgsShow(t)}}},[i("md-tag",{staticClass:"image-reader-item-del",attrs:{size:"small",shape:"quarter","fill-color":"#111A34",type:"fill","font-color":"#fff"},nativeOn:{click:function(t){return t.stopPropagation(),e.onDeleteImage("tupian",a)}}},[i("md-icon",{attrs:{name:"close"}})],1)],1)})),i("li",{directives:[{name:"show",rawName:"v-show",value:0==e.imageList.tupian.length,expression:"imageList.tupian.length == 0"}],staticClass:"image-reader-item add"},[i("md-image-reader",{attrs:{name:"tupian"},on:{select:e.onReaderSelect,complete:e.onReaderComplete,error:e.onReaderError}}),i("md-icon",{attrs:{name:"camera",size:"md",color:"#CCC"}}),i("p",[e._v("添加图片")])],1)],2)])])]),i("md-input-item",{ref:"input0",attrs:{title:"* 姓名",placeholder:"请输入姓名","is-amount":"",maxlength:15},model:{value:e.visitor_name,callback:function(t){e.visitor_name=t},expression:"visitor_name"}}),i("md-input-item",{ref:"input2",attrs:{title:"联系方式",placeholder:"0-40个字符","is-amount":"",maxlength:40},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}}),i("md-input-item",{ref:"input6",attrs:{title:"备注",placeholder:"0-40个字符","is-amount":"",maxlength:40},model:{value:e.remark,callback:function(t){e.remark=t},expression:"remark"}})],1),i("md-field",[i("md-button",{attrs:{type:"primary",size:"small",round:""},on:{click:e.submit}},[e._v("提交保存")])],1)],1),i("md-image-viewer",{attrs:{list:e.imgs,"has-dots":!0},model:{value:e.isViewerShow,callback:function(t){e.isViewerShow=t},expression:"isViewerShow"}})],1)},r=[],n=(i("9a33"),i("cc57"),i("6d57"),i("ff21"),i("82ae")),s=i.n(n),o=i("7ee5"),l=i.n(o),c={name:"add_yellow",data:function(){return{isViewerShow:!1,imgs:[],id:"",yellow_list_nbr:"",visitor_name:"",phone:"",remark:"",imageList:{tupian:[]},blob:null,file:{}}},methods:{imgsShow:function(e){this.isViewerShow=!0,this.imgs=[e]},onReaderSelect:function(e,t){var i=t.files;i.forEach((function(e){console.log("[Mand Mobile] ImageReader Selected:","File Name "+e.name)})),this.$toast.loading("图片读取中...")},onReaderComplete:function(e,t){var i=this,a=t.dataUrl,r=t.blob,n=t.file;this.$toast.hide(),console.log("[Mand Mobile] ImageReader Complete:","File Name "+n.name),setTimeout((function(){var t=i.imageList[e]||[];t.push(a),i.$set(i.imageList,e,t),i.blob=r,i.file=n}),100)},onReaderError:function(e,t){var i=t.msg;this.$toast.failed(i)},onDeleteImage:function(e,t){var i=this.imageList[e]||[];i.splice(t,1),this.$set(this.imageList,e,i)},submit:function(){var e=this,t={visitor_name:this.visitor_name,visitor_type:"Y",phone:this.phone,remark:this.remark,visitor_photo:this.visitor_photo};""==this.visitor_name?this.$toast.failed("请输入姓名"):0==this.imageList.tupian.length?this.$toast.failed("请上传图片"):null==this.blob?this.updateStudent(t):(this.$toast.loading("图片上传中..."),new l.a({res:this.file,justConversion:!1,width:300,quality:.1,size:500,requestType:"file",responseType:"file",fileName:"yellow",callback:function(i){if(null!==i){console.log(i.size/1024);var a=new FormData;a.append("file",i,(new Date).getTime()+"."+i.type.split("/")[1]),s.a.post("http://106.12.3.212/dorm/yellow/UploadImg/-1",a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(i){0==i.data.code?(t.photo=i.data.url,e.visitor_photo=i.data.url,t.visitor_photo=i.data.url,setTimeout((function(){e.updateStudent(t)}),500)):e.$toast.failed("图片上传失败")})).catch((function(t){e.$toast.failed("图片上传失败")}))}else e.$toast.failed("图片上传失败")}}))},updateStudent:function(e){var t=this;"set"==this.$route.query.type?(e.id=this.id,e.usernbr=this.yellow_list_nbr):e.usernbr=(new Date).valueOf(),this.$toast.loading("数据提交中..."),this.$post("/users/yellow_add",e,(function(){t.$toast.succeed("提交成功"),setTimeout((function(){t.$router.back()}),1e3)}))}},mounted:function(){var e=this;"set"==this.$route.query.type&&(document.title=window.configs.headertitle+"黄名单信息修改",this.$get("/users/person_yellow",{usernbr:this.$route.query.usernbr},(function(t){console.log(t.data[0]);var i=t.data[0];e.id=i.id,e.visitor_name=i.yellow_list_name,e.phone=i.phone,e.remark=i.remark,e.yellow_list_nbr=i.yellow_list_nbr,e.imageList.tupian=i.yellow_list_photo?[i.yellow_list_photo]:[],e.visitor_photo=i.yellow_list_photo?i.yellow_list_photo:""})))}},u=c,p=(i("26a9"),i("e90a")),h=Object(p["a"])(u,a,r,!1,null,"0dc6c200",null);t["default"]=h.exports},e46a:function(e,t,i){},e754:function(e,t,i){"use strict";var a=i("fc81")(!0);e.exports=function(e,t,i){return t+(i?a(e,t).length:1)}},f1fe:function(e,t,i){"use strict";var a=i("69b3");e.exports=function(){var e=a(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},fc81:function(e,t,i){var a=i("ee21"),r=i("f6b4");e.exports=function(e){return function(t,i){var n,s,o=String(r(t)),l=a(i),c=o.length;return l<0||l>=c?e?"":void 0:(n=o.charCodeAt(l),n<55296||n>56319||l+1===c||(s=o.charCodeAt(l+1))<56320||s>57343?e?o.charAt(l):n:e?o.slice(l,l+2):s-56320+(n-55296<<10)+65536)}}},ff21:function(e,t,i){"use strict";var a=i("e46b"),r=i("013f")(0),n=i("a2cd")([].forEach,!0);a(a.P+a.F*!n,"Array",{forEach:function(e){return r(this,e,arguments[1])}})}}]);
//# sourceMappingURL=chunk-66168e47.56760195.js.map