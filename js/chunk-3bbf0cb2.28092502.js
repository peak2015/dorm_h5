(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3bbf0cb2"],{"013f":function(t,e,a){var i=a("4ce5"),s=a("224c"),r=a("008a"),n=a("eafa"),o=a("5dd2");t.exports=function(t,e){var a=1==t,l=2==t,c=3==t,u=4==t,d=6==t,f=5==t||d,m=e||o;return function(e,o,h){for(var p,v,g=r(e),b=s(g),L=i(o,h,3),S=n(b.length),C=0,_=a?m(e,S):l?m(e,0):void 0;S>C;C++)if((f||C in b)&&(p=b[C],v=L(p,C,g),t))if(a)_[C]=v;else if(v)switch(t){case 3:return!0;case 5:return p;case 6:return C;case 2:_.push(p)}else if(u)return!1;return d?-1:c||u?u:_}}},"0365":function(t,e,a){"use strict";var i=a("296a"),s=a.n(i);s.a},2346:function(t,e,a){var i=a("75c4");t.exports=Array.isArray||function(t){return"Array"==i(t)}},"296a":function(t,e,a){},"5dd2":function(t,e,a){var i=a("81dc");t.exports=function(t,e){return new(i(t))(e)}},"6d57":function(t,e,a){for(var i=a("e44b"),s=a("80a9"),r=a("bf16"),n=a("e7ad"),o=a("86d4"),l=a("da6d"),c=a("cb3d"),u=c("iterator"),d=c("toStringTag"),f=l.Array,m={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=s(m),p=0;p<h.length;p++){var v,g=h[p],b=m[g],L=n[g],S=L&&L.prototype;if(S&&(S[u]||o(S,u,f),S[d]||o(S,d,g),l[g]=f,b))for(v in i)S[v]||r(S,v,i[v],!0)}},7463:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("v-back",{attrs:{title:"照片上传"}}),a("md-field",[a("md-input-item",{ref:"input0",attrs:{title:"学生学号",placeholder:"请输入学号","is-amount":"",maxlength:15},model:{value:t.usernbr,callback:function(e){t.usernbr=e},expression:"usernbr"}},[a("div",{staticClass:"input-operator",attrs:{slot:"right"},on:{click:t.search},slot:"right"},[t._v("查询")])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}]},[a("div",{staticClass:"form_banner border-bottom flex"},[a("div",[t._v("学生姓名")]),a("div",{staticClass:"content"},[t._v(t._s(t.detail.username))])]),a("div",{staticClass:"form_banner border-bottom flex"},[a("div",[t._v("所在班级")]),a("div",{staticClass:"content"},[t._v(t._s(t.detail.college_name)+t._s(t.detail.org_names)+t._s(t.detail.class_names))])]),a("div",{staticClass:"form_banner border-bottom flex"},[a("div",[t._v("学生图片")]),a("div",{staticClass:"content"},[a("img",{attrs:{src:t.detail.photo,alt:""}})])]),a("div",{staticClass:"form_banner border-bottom flex"},[a("div",[t._v("上传图片")])]),a("md-notice-bar",[a("md-icon",{staticClass:"md-notice-demo-icon md-notice-demo-icon-left",attrs:{slot:"left",name:"security"},slot:"left"}),t._v("\n                已有的学生图片会被替换\n            ")],1),a("ul",{staticClass:"image-reader-list"},[t._l(t.imageList["tupian"],(function(e,i){return a("li",{key:i,staticClass:"image-reader-item",style:{backgroundImage:"url("+e+")",backgroundPosition:"center center",backgroundRepeat:"no-repeat",backgroundSize:"cover"}},[a("md-tag",{staticClass:"image-reader-item-del",attrs:{size:"small",shape:"quarter","fill-color":"#111A34",type:"fill","font-color":"#fff"},nativeOn:{click:function(e){return t.onDeleteImage("tupian",i)}}},[a("md-icon",{attrs:{name:"close"}})],1)],1)})),a("li",{directives:[{name:"show",rawName:"v-show",value:0==t.imageList.tupian.length,expression:"imageList.tupian.length == 0"}],staticClass:"image-reader-item add"},[a("md-image-reader",{attrs:{name:"tupian",size:"2048"},on:{select:t.onReaderSelect,complete:t.onReaderComplete,error:t.onReaderError}}),a("md-icon",{attrs:{name:"camera",size:"md",color:"#CCC"}}),a("p",[t._v("添加图片")])],1)],2),a("md-field",[a("md-button",{attrs:{type:"primary",size:"small",round:""},on:{click:t.submit}},[t._v("开始上传")])],1)],1)],1)],1)},s=[],r=(a("cc57"),a("6d57"),a("ff21"),a("82ae")),n=a.n(r),o={name:"photo_upload",data:function(){return{imageList:{tupian:[]},show:!1,usernbr:"",detail:{},blob:null,file:{}}},methods:{search:function(){var t=this;""==this.usernbr?this.$toast.failed("请输入学号"):this.$getL("/users/student",{userId:JSON.parse(localStorage.getItem("user")).user_id,usernbr:this.usernbr},(function(e){t.detail=e.data,t.$toast.hide(),t.show=!0}))},onReaderSelect:function(t,e){var a=e.files;a.forEach((function(t){console.log("[Mand Mobile] ImageReader Selected:","File Name "+t.name)})),this.$toast.loading("图片读取中...")},onReaderComplete:function(t,e){var a=this,i=e.dataUrl,s=e.blob,r=e.file;this.$toast.hide(),console.log("[Mand Mobile] ImageReader Complete:","File Name "+r.name),setTimeout((function(){var e=a.imageList[t]||[];e.push(i),a.$set(a.imageList,t,e),a.blob=s,a.file=r}),100)},onReaderError:function(t,e){var a=e.msg;this.$toast.failed(a)},onDeleteImage:function(t,e){var a=this.imageList[t]||[];a.splice(e,1),this.$set(this.imageList,t,a)},submit:function(){var t=this;if(0!=this.imageList.tupian.length){var e=new FormData,a={headers:{"Content-Type":"multipart/form-data"}};console.log(this.file.name),e.append("file",this.blob,this.file.name),e.append("usernbr",this.usernbr),this.$toast.loading("loading"),n.a.post(this.$baseUrl()+"/users/upload",e,a).then((function(e){console.log(e.data),t.updateStudent(e.data.data)}))}else this.$toast.failed("请上传图片")},updateStudent:function(t){var e=this;this.$getL("/users/update_student",{userId:JSON.parse(localStorage.getItem("user")).user_id,usernbr:this.usernbr,photo:t},(function(t){console.log(t),e.$toast.succeed("上传成功")}))}}},l=o,c=(a("0365"),a("e90a")),u=Object(c["a"])(l,i,s,!1,null,"0e80336e",null);e["default"]=u.exports},"81dc":function(t,e,a){var i=a("fb68"),s=a("2346"),r=a("cb3d")("species");t.exports=function(t){var e;return s(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!s(e.prototype)||(e=void 0),i(e)&&(e=e[r],null===e&&(e=void 0))),void 0===e?Array:e}},a2cd:function(t,e,a){"use strict";var i=a("238a");t.exports=function(t,e){return!!t&&i((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},ff21:function(t,e,a){"use strict";var i=a("e46b"),s=a("013f")(0),r=a("a2cd")([].forEach,!0);i(i.P+i.F*!r,"Array",{forEach:function(t){return s(this,t,arguments[1])}})}}]);
//# sourceMappingURL=chunk-3bbf0cb2.28092502.js.map